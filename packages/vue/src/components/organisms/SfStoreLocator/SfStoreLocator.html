<div class="sf-store-locator">
  <div class="sf-store-locator__title">
    Found stores: <span>{{stores.length}}</span>
  </div>
  <div class="sf-store-locator__wrapper">
    <div class="sf-store-locator__list">
      <slot name="stores" :parsed-stores="parsedStores" :center-on="centerOn">
        <div class="sf-store-locator__first-divider">
          <sf-divider />
        </div>
        <div class="sf-store-locator__list-item-wrapper" v-for="(store, index) in parsedStores" :key="index">
          <div class="sf-store-locator__list-item">
            <div class="sf-store-locator__list-item-media" @click="centerOn(store)">
              <sf-image :src="store.picture" :alt="store.name" />
            </div>
            <div class="sf-store-locator__list-item-info">
              <div class="sf-store-locator__list-item-info-heading">
                <div class="sf-store-locator__list-item-info-heading-name" >
                  {{ store.name }}
                </div>
                <div class="sf-store-locator__list-item-info-heading-distance" v-show="store.distance">
                  <span>{{store.distance}}km</span> away from you
                </div>
              </div>
              <div class="sf-store-locator__list-item-info-address" >
                {{ store.address }}
              </div>
              <div class="sf-store-locator__list-item-info-phone" >
                <sf-icon path="phone" size="13px" color="green-primary" />
                <span>{{ store.phone }}</span>
              </div>
              <div class="sf-store-locator__list-item-info-email" >
                <sf-icon path="mail" size="13px" color="green-primary" />
                <span>{{ store.email }}</span>
              </div>
            </div>
          </div>
          <sf-divider />
        </div>
      </slot>
    </div>
    <div class="sf-store-locator__map-wrapper">
      <l-map class="sf-store-locator__map-wrapper-map" v-if="loaded" ref="map" v-bind="mapOptions" :center="center" :zoom="zoom" :max-zoom="maxZoom" @ready="mapReady" @locationfound="locationFound" @locationerror="locationError">
        <l-tilelayer v-bind="tileLayerOptions" :url="tileServerUrl"  />
        <l-marker v-for="(store, index) in parsedStores" :key="index"  v-bind="markerOptions" :lat-lng="store.latlng">
          <l-icon :icon-size="markerIconSize" :icon-anchor="markerIconAnchor">
            <slot name="marker-icon" >
              <sf-icon path="marker" />
            </slot>
          </l-icon>
        </l-marker>
      </l-map>
    </div>
  </div>
</div>