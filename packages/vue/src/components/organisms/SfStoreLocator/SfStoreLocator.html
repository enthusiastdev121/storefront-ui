<div class="sf-store-locator">
  <div class="sf-store-locator__title" tabindex="0">
    Found stores: <span>{{stores.length}}</span>
  </div>
  <div class="sf-store-locator__wrapper">
    <div class="sf-store-locator__list">
      <!-- @slot Use this slot to replace how the store card are drawn -->
      <slot name="stores" :parsed-stores="parsedStores" :center-on="centerOn">
        <div class="sf-store-locator__first-divider">
          <sf-divider />
        </div>
        <div class="sf-store-locator__list-item-wrapper" v-for="(store, index) in parsedStores" :key="index">
          <div class="sf-store-locator__list-item">
            <div class="sf-store-locator__list-item-media" @click="centerOn(store)">
              <sf-image :src="store.picture" :alt="`${store.name} picture`" tabindex="0" />
            </div>
            <div class="sf-store-locator__list-item-info">
              <div class="sf-store-locator__list-item-info-heading">
                <div class="sf-store-locator__list-item-info-heading-name" tabindex="0" >
                  {{ store.name }}
                </div>
                <div class="sf-store-locator__list-item-info-heading-distance" v-show="store.distance" tabindex="0">
                  <span>{{store.distance}}km</span> away from you
                </div>
              </div>
              <div class="sf-store-locator__list-item-info-address" tabindex="0">
                {{ store.address }}
              </div>
              <div class="sf-store-locator__list-item-info-phone" >
                <sf-icon path="phone" size="13px" color="green-primary" />
                <span tabindex="0">{{ store.phone }}</span>
              </div>
              <div class="sf-store-locator__list-item-info-email" >
                <sf-icon path="mail" size="13px" color="green-primary" />
                <span tabindex="0">{{ store.email }}</span>
              </div>
            </div>
          </div>
          <sf-divider />
        </div>
      </slot>
    </div>
    <div class="sf-store-locator__map-wrapper">
      <l-map class="sf-store-locator__map-wrapper-map" v-if="loaded" ref="map" :options="mapOptions" :center="center" :zoom="zoom" :max-zoom="maxZoom" @ready="onMapReady" @locationfound="locationFound" @locationerror="locationError">
        <l-tilelayer v-bind="tileLayerOptions" :url="tileServerUrl" :attribution="tileServerAttribution"  />
        <l-marker v-for="(store, index) in parsedStores" :lat-lng="store.latlng" :key="index" v-bind="markerOptions">
          <l-icon :icon-size="markerIconSize" :icon-anchor="markerIconAnchor">
            <!-- @slot Use this slot to change the icon of the stores, remember to update `markerIconSize` and `markerIconAnchor` accordingly-->
              <slot name="marker-icon" >
                <sf-icon :aria-label="`${store.name} located at ${store.address}`" path="marker" />
              </slot>
          </l-icon>
        </l-marker>
      </l-map>
      <!-- @slot Use this slot to customise the loading indicator while the map librry loads -->
      <slot v-if="!mapReady" name="map-loading" class="sf-store-locator-map-wrapper-loading">
        <sf-loader />
      </slot>
    </div>
  </div>
</div>